# UnishopProject


# UnishopProjectì— ëŒ€í•´ì„œ...
- UnishopProjectëŠ” 20~30ëŒ€ë¥¼ íƒ€ê²Ÿìœ¼ë¡œ í•˜ëŠ” Springboot/JPAê¸°ë°˜ì— ì‡¼í•‘ëª° ì‚¬ì´íŠ¸ ì›¹ì‚¬ì´íŠ¸ ì…ë‹ˆë‹¤.
	-ê¸°ì¡´ì— í•œêµ­ì ì¸ ëŠë‚Œì— ì‡¼í•‘ëª°ì´ ì•„ë‹Œ ê¹”ë”í•˜ê³  ì„¸ë ¨ëœ ë””ìì¸ì„ ì ìš©í•´ ë´¤ìŠµë‹ˆë‹¤.
	
# íŒ€ì› ì†Œê°œ
- ì´í˜¸ê²¸
	-ë²¡ì—”ë“œ ê¸°ìˆ ë‹´ë‹¹
- ê¹€ì‹ ì›
	-ë””ìì¸/ë°˜ì‘í˜• í”„ë¡ íŠ¸ ê¸°ìˆ ë‹´ë‹¹
- ì„í˜„ì„­
	-í˜ì´ì§€ì„¤ê³„ /ë””ìì¸/ë°±ì—”ë“œ ê¸°ìˆ ë‹´ë‹¹


- ğŸ¬ [ìœ íŠœë¸Œ ë§í¬](https://youtu.be/H8tKb5FBWG4)

- ğŸ“• [ìŠ¤í† ë¦¬ ë³´ë“œ](https://www.figma.com/file/1l49U588J7vSp6tkarXMoB/model-%EC%A7%9C%EA%B8%B0?node-id=0%3A1)


## ê°œìš”

- ëª…ì¹­ : Unishop
- ê°œë°œ ì¸ì› : 3ëª…
	-Front end: **ê¹€ì‹ ì›, ì„í˜„ì„­ **
	-Back end: **ì´í˜¸ê²¸, ì„í˜„ì„­**
- ê°œë°œê¸°ê°„ : 2021.07~
- ì£¼ìš”ê¸°ëŠ¥
	- ê´€ë¦¬ì(admin)ê°€ ìƒí’ˆì„ ë“±ë¡í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ê°€ ìƒí’ˆì„ ê³ ë¥¸í›„ ê²°ì œ
	- í´ë¼ì´ì–¸íŠ¸ê°€ ìì‹ ì´ ê²°ì œí•œ ìƒí’ˆë“¤ì„ ê´€ë¦¬ (ë§ˆì´í˜ì´ì§€)
	- ê´€ë¦¬ìê°€ í´ë¼ì´ì–¸íŠ¸ê°€ êµ¬ë©”í•œ ìƒí’ˆë“¤ ê´€ë¦¬ (ê´€ë¦¬ì í˜ì´ì§€)
- ê°œë°œ ì–¸ì–´ : Springboot,java, javaScript, html5/css
- í˜•ìƒ ê´€ë¦¬ íˆ´ : git
- í˜‘ì—… íˆ´ : slack, Trello
- ê°„ë‹¨ ì†Œê°œ : Springboot/JPAë¥¼ ì‚¬ìš©í•œ ì‡¼í•‘ëª°


## í”„ë¡œì íŠ¸ íŠ¹ì§•

- ê¹”ë”í•˜ê³  ìƒˆë ¨ëœ ë””ìì¸ì— 20~30ëŒ€ë¥¼ íƒ€ê²Ÿìœ¼ë¡œ í•œ ì‡¼í•‘ëª° ì„œë¹„ìŠ¤

- ì‚¬ìš©ì UXë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ê°œë°œí•œ UI

- ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ë””ìì¸
	-íŒ€ì›ë“¤ì˜ íŠ¹ì„±ì„ ê³ ë ¤í•´ì„œ ê° íŒŒíŠ¸ë³„ë¡œ ë‚˜ëˆ ì„œ í˜‘ì—…
	-gitì„ í†µí•œ ë³‘í•©ê³¼ ë¶„ê¸°ë¥¼ ì ê·¹í™œìš©í•´ì„œ ì‘ì—…
	
- APIëª…ì„¸ì„œì™€ ê°€ì´ë“œë¼ì¸ì— ë”°ë¼ì„œ APIí˜¸ì¶œ ë° ì‘ë‹µ

- ì‚¬ìš©í•œ API 
	-coolsms(ID/PW ì°¾ê¸°ì‹œ ë¬¸ì ì¸ì¦)
	-import(ê²°ì œ)
	-ì£¼ì†ŒAPI
	
- ê³µí†µ ë¡œì§ì€ AOPì™€ intercepterë¡œ ë¬¶ì–´ì„œ ì ìš©

- ì‹¤í–‰ í™˜ê²½
	- Chrome




## í”„ë¡œì íŠ¸ì— ì‚¬ìš©í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬,ì˜ì¡´ì„±,ìŠ¹ì¸í‚¤




### ì£¼ì†Œ API ìŠ¹ì¸í‚¤
```
https://www.juso.go.kr/addrlink/addrLinkUrl.do?confmKey=devU01TX0FVVEgyMDIxMDcwNTE3MjgyMzExMTM2MTE=&returnUrl=http://localhost:8000
```


- cool sms ì˜ì¡´ì„±

```bash
 <dependency>
    <groupId>net.nurigo</groupId>
    <artifactId>javaSDK</artifactId>
    <version>2.2</version>
  </dependency>
```



-JSPë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì˜ì¡´ì„±

```xml
<dependency>
    <groupId>org.apache.tomcat</groupId>
    <artifactId>tomcat-jasper</artifactId>
    <version>9.0.46</version>
</dependency>

<!-- https://mvnrepository.com/artifact/javax.servlet/jstl -->
<dependency>
	<groupId>javax.servlet</groupId>
	<artifactId>jstl</artifactId>
	<version>1.2</version>
</dependency>
```



## í”„ë¡œì íŠ¸ ê¸°ë³¸ ymlíŒŒì¼ ì„¤ì •

```
server:
 port: 8000
 servlet:
    encoding:
      charset: UTF-8
      

spring:
  mvc:
    view:
      prefix: /WEB-INF/views/
      suffix: .jsp
  output:
    ansi:
      enabled: always

  datasource:
    driver-class-name: org.mariadb.jdbc.Driver
    username: unishop
    password: tlsdnjs12
    url: jdbc:mysql://localhost:3306/unishopdb      
    
    
  jpa:
    hibernate:
      ddl-auto: none  #create:, update, none
    show-sql: true
    open-in-view: true

  servlet:
    multipart:
      file-size-threshold: 1MB
      location: C:/images
      max-file-size: 6MB
      max-request-size: 6MB
      
```
- DBì— ì»¤ë„¥ì…˜í•˜ëŠ” ì„¤ì •ì€ í™˜ê²½ì— ë§ê²Œ ì„¤ì • í•´ ì¤˜ì•¼ í•©ë‹ˆë‹¤.
	


## ğŸš€ í•µì‹¬ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…




### ê²°ì œ ë¦¬ìŠ¤íŠ¸ êµ¬í˜„ì‹œ DBëª¨ë¸ë§ ëª¨ìˆœì„ í•´ê²°í–ˆë˜ ë°©ë²•
```
ê²°ì œ ë°ì´í„°ë¥¼ fetchìš”ì²­ìœ¼ë¡œ ì €ì¥í•˜ëŠ”ê²ƒ ê¹Œì§€ ì™„ë£Œí•˜ê³  ì´ì œ êµ¬ë©”ë¦¬ìŠ¤íŠ¸ì— í•´ë‹¹ íšŒì›ì˜ ê²°ì œì •ë³´ë¥¼ ë§ˆì´í˜ì´ì§€ì—ì„œ ê´€ë¦¬í•˜ê²Œí•˜ê¸°ìœ„í•´ì„œ ì €ì¥ëœ ë°ì´í„°ë¥¼ ë¿Œë¦¬ë ¤ê³  í–ˆì„ë•Œ
ë¬¸ì œì ì„ ë°œê²¬ í–ˆë‹¤. ê·¸ ë¬¸ì œì ì€ ë°”ë¡œ ê²°ì œí• ë•Œ ìƒí’ˆì˜ ì •ë³´ë¥¼ ì €ì¥í•˜ì§€ ëª»í–ˆê¸°ë•Œë¬¸. ê·¸ë˜ì„œ ê²°ì œì‹œì— ìƒí’ˆì •ë³´ë¥¼ ì €ì¥í•˜ë ¤í•˜ë‹ˆ dbê´€ê³„ìƒ userì—ì„œ ìƒí’ˆì€ onetomanyê´€ê³„ë¼ì„œ ì»¬ë™ì…˜íƒ€ì…ìœ¼ë¡œ ë¼ìˆì—ˆë‹¤.
ë°ì´í„°ëŠ” ì˜¤ë¸Œì íŠ¸ë¡œ ë“¤ì–´ì˜¤ëŠ”ë° ì»¬ë™ì…˜íƒ€ì…ì— ì €ì¥ì´ ì•ˆëë˜ ê²ƒì´ë‹¤.

í•´ê²° í–ˆë˜ ë°©ë²•
buyë¼ëŠ” êµ¬ë§¤ì •ë³´ë§Œ ì €ì¥í•˜ëŠ” í…Œì´ë¸”ì„ ë§Œë“¤ì–´ì„œ ìœ ì €ì™€ ìƒí’ˆì˜ í´ì¸í‚¤ë¥¼ ê´€ë¦¬í–ˆë‹¤.
ê·¸ë˜ì„œ ê²°ì œì™„ë£Œì‹œ ì‹¤í–‰ë˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ paymentë§Œ ì €ì¥í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ buyë„ ê°™ì´ ì €ì¥í•¨ìœ¼ë¡œì„œ buyì™€ paymentë¥¼ í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ë¬¶ëŠ” ë°©ë²•ì„ ì„ íƒí–ˆë‹¤.
 
```



### ì´ë‹ˆì‹œìŠ¤ ê²°ì œ api í˜¸ì¶œ ë°©ë²•
```
<!-- jQuery -->
<script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<!-- iamport.payment.js -->
<script type="text/javascript" src="https://cdn.iamport.kr/js/iamport.payment-1.1.5.js"></script>
jQueryë„£ì–´ì£¼ê¸°!

 let IMP = window.IMP;
        IMP.init("imp55496891");
        IMP.request_pay({
            pg: "html5_inicis",//ì´ë‹ˆì‹œìŠ¤ ì›¹í‘œì¤€ ê²°ì œì°½
            pay_method: "card",//ê²°ì œë°©ë²•
            merchant_uid: "ORD20180131-0000011",//ì£¼ë¬¸ë²ˆí˜¸
            name: "ì²­ë°”ì§€",//ìƒí’ˆëª…
            amount: 19000,//ê°€ê²©
            buyer_email: "ssar@gmail.com",//ì´ë©”ì¼
            buyer_name: "ì´í˜¸ê²¸",//ì´ë¦„
            buyer_tel: "010-4242-4242",//ì—°ë½ì²˜
            buyer_addr: "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì‹ ì‚¬ë™",//ì£¼ì†Œ
            buyer_postcode: "01181"//ìƒí’ˆì½”ë“œ
        }, function (rsp) {
            console.log(rsp);
            if (rsp.success) {
                let msg = 'ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.';
                msg += 'ê³ ìœ ID : ' + rsp.imp_uid;//ì•„ì„í¬íŠ¸ ê±°ë˜ê³ ìœ ë²ˆí˜¸
                msg += 'ìƒì  ê±°ë˜ID : ' + rsp.merchant_uid;//ì£¼ë¬¸ë²ˆí˜¸
                msg += 'ê²°ì œ ê¸ˆì•¡ : ' + rsp.paid_amount;//ê²°ì œê¸ˆì•¡
                msg += 'ì¹´ë“œ ìŠ¹ì¸ë²ˆí˜¸ : ' + rsp.apply_num;
            } else {
                let msg = 'ê²°ì œì— ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.';
                msg += 'ì—ëŸ¬ë‚´ìš© : ' + rsp.error_msg;
            }
            alert(msg);
        });
        

```
- ì¶”ê°€ì ì¸ íŒŒë¼ë¯¸í„°ê°’ì€ apië¬¸ì„œ í™•ì¸í•´ì„œ ì¶”ê°€í• ê²ƒ!


### ê²°ì œì„±ê³µì‹œ íŒŒë¼ë©”í„°
```
"id":1,
"apply_num":"",
"bank_name":null,
"buyer_addr":"ê²½ìƒë‚¨ë„ ì°½ì›ì‹œ ì„±ì‚°êµ¬ ì¤‘ì•™ëŒ€ë¡œ 151, 123(ìš©í˜¸ë™)",
"buyer_email":"fj2008@naver.com",
"buyer_name":"ì´í˜¸ê²¸",
"buyer_postcode":"1",
"buyer_tel":"01089628481",
"card_name":null,
"card_number":"*********",
"card_quota":0,
"currency":"KRW",
"custom_data":null,
"imp_uid":"imp_842308363291",
"merchant_uid":"27",
"name":"test",
"paid_amount":1,
"paid_at":1628214352,
"pay_method":"point",
"pg_provider":"html5_inicis",
"pg_tid":"StdpayCARDINIpayTest20210806104551189406",
"pg_type":"payment",
"receipt_url":"https://iniweb.inicis.com/DefaultWebApp/mall/cr/cm/mCmReceipt_head.jsp?noTid=StdpayCARDINIpayTest20210806104551189406&noMethod=1",
"status":"paid",
"user":{
"id":1,
"username":"ssar",
"password":"1234",
"email":"fj2008@naver.com",
"address":"ê²½ìƒë‚¨ë„ ì°½ì›ì‹œ ì„±ì‚°êµ¬ ì¤‘ì•™ëŒ€ë¡œ 151, 123(ìš©í˜¸ë™)",
"phonenumber":"01089628481",
"name":"ì´í˜¸ê²¸"
},
"posts":[
]
}
]
```
- ìœ„ íŒŒë¼ë©”í„° ê°’ì„ í† ëŒ€ë¡œ í•„ìš”í•œ íŒŒë¼ë©”í„°ë§Œ ì°¾ì•„ì„œ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ìœ¼ë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.



### ì»´í“¨í„° ì˜®ê²¼ì„ë•Œ ìˆ˜ì •í•´ì•¼í•  ì½”ë“œ

- utilsì— myPathì— ì €ì¥ë  ì´ë¯¸ì§€ê²½ë¡œ(ì´ê±°ë•Œë¬¸ì— 1ì‹œê°„ë‚ ë ¸ìŠµë‹ˆë‹¤...)
- UserControllerì—ì„œ ì¿¨smsë³´ë‚´ëŠ” ì½”ë“œ ì£¼ì„í™•ì¸






## ğŸ˜Š ì‘ì—…ì„ í¸í•˜ê²Œ í•´ì¤„ ë¡œì§ ëª¨ìŒ (í…ŒìŠ¤íŠ¸ìš© ë”ë¯¸ë°ì´í„° insert,ê·¸ì™¸ ë³µë¶™í•´ì•¼í•˜ëŠ” ë¡œì§ë“¤)




### ê´€ë¦¬ìì•„ì´ë”” insert
```
INSERT INTO admin_user(username, PASSWORD ,email ,address ,phonenumber ,NAME ,role)VALUES('ssar','1234','and@naver.com','ë¶€ì‚°','01011111111','ì´ë¦„','ADMIN');

```




### ë°ì´í„°ë² ì´ìŠ¤ ìƒì„± ë°©ë²•
```sql
CREATE USER 'unishop'@'%' IDENTIFIED BY 'korea1234';
GRANT ALL PRIVILEGES ON *.* TO 'unishop'@'%';
CREATE database unishopdb;
```




### JSTL teglib
```jsp
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
```




### ë”ë¯¸ë°ì´í„°
```sql
ìƒí’ˆí‰ ë”ë¯¸ë°ì´í„°
INSERT INTO comment(productcs, registrationtime, score ,sizecs ,colorcs ,image , user_id, product_id)VALUES('ìƒí’ˆí‰4','2021-08-08','5','ì¡°ê¸ˆ ì‘ì•„ìš”','ìƒ‰ê° ì¢‹ì•„ìš”','ì´ë¯¸ì§€ ì´ë¦„',1,1);
```




```
function selectProductDelete(userId) {

	if (confirm("ì„ íƒí•˜ì‹  ìƒí’ˆì„ ì‚­ì œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?") == true) {
		$('input:checkbox[name="id"]').each(
			async function checked() {
				if (this.checked) {
					
					// ì²´í¬ ëœ ê²ƒë“¤ eachë¡œ ê°ê°ì˜ value ê°’ì„ ë˜ì ¸ì£¼ê²Œ ë§Œë“ ë‹¤

					// alertëŠ” í™•ì¸ìš©!
					//		            alert(this.value); 
					let id = this.value;
					// fetchë¡œ valueì— ë‹´ìœ¼ë©´ ë ë“¯!
					let postDto = {
						id: id
					};

					// ì €ì¥ë§Œ í•˜ê¸° ë•Œë¬¸ì— responseë¡œ Stringì„ ì•ˆë°›ì•˜ìŒ
					// ì™œëƒí•˜ë©´ ì—¬ëŸ¬ê°œë¥¼ ë˜ì ¸ì£¼ê¸° ë•Œë¬¸ì—!
					await fetch("/bucket/delete", {
						method: "delete",
						body: JSON.stringify(postDto),
						headers: {
							"Content-Type": "application/json;charset=utf-8"
						}
					});

					console.log(id + " : id ë²ˆì§¸ ë¬¼ê±´ ì‚­ì œë˜ì—ˆì–´ìš”!");
				}

			});
			console.log ("userId ë‚˜ì˜¤ë‚˜ìš”? : "+ userId);
			if(userId != null){
				console.log("ë„¤ ë‚˜ì˜µë‹ˆë‹¤!!" + userId);
			}
		location.href = "/bucket/" + userId;
		alert("ìƒí’ˆì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
	} else {
		return;
	}
}


//location.reload();
//}
```




















